<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gregos</title>
    <link rel="stylesheet" href="../styles/post.css">
</head>

<body>
    <div class="header">
        <div class="container">
            <h1>S.I.G</h1>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="../post.html">Artigos</a></li>
                <li><a id="nav_login" href="login.html"></a></li>
                <li id="li_sair"><a onclick="fnDeslogar()">Sair</a></li>
            </ul>
        </div>
    </div>

    <div class="conteudo">
        <div class="container">
            <div id="img_post" class="img"></div>
            <section>
                <p class="paragrafo">Apenas uma pequena mudança de perspectiva leva a uma mudança gigantesca na
                    qualidade de vida das pessoas!</p>
                <br>
                <p class="paragrafo">Vamos entender, usando dois exemplos, como essa mudança de perspectiva funciona:
                </p>
                <br>
                <p class="titulo">1° caso</p>
                <br>
                <p class="paragrafo">O 1º será uma garota que estava profundamente infeliz. Que alimentava esse
                    sentimento por ter supostamente "quase matado sua mamãe", vamos entender melhor.</p>
                <br>
                <p class="paragrafo">Ao ir à terepia, relatou ter esse sentimento por anos, devido sua mãe, em algum
                    momento, ter comentado com ela que seu parto foi muito difícil. Um dos motivos foi que, na época do
                    parto, a mãe da garota estava com <strong>malária</strong>. Por isso, de alguma forma, a garota se
                    sentia culpada. E então, durante anos, ela carregou internamente uma culpa por “quase ter matado a
                    mamãe”!</p>
                <br>
                <p class="paragrafo">Então, na terapia, o doutor fez a simples pergunta:</p>
                <br>
                <p class="paragrafo">– Vem cá! Quem transmite malária é um mosquito! Então você se acha uma mosquitinha
                    ?</p>
                <br>
                <p class="paragrafo">– Mas doutor! Não é que é verdade? Eu nunca tinha parado para pensar nisso!</p>
                <br>
                <p class="paragrafo">Com esse simples questionamento ela ressignificou uma dor que se arrastava por anos
                    a fio e ela se curou dessa imensa culpa por “quase ter matado a mamãe”. Muito bonita essa história
                    não é mesmo? Por mais curta que seja, ela carrega uma lição muito importante acerca da mudança de
                    perspectiva.</p>
                <br>
                <p class="titulo">2° caso</p>
                <br>
                <p class="paragrafo">O 2ª exemplo é sobre uma garota que se queixava imensamente porque não foi tão
                    amada pela mãe como foram seus irmãos e irmãs. Na terapia, ela disse que tinha mais 4 irmãos e que
                    dos 5 filhos, ela tinha sido a única que nunca tinha mamado.</p>
                <br>
                <p class="paragrafo">Então, percebendo que havia muitas mágoas e ressentimentos nela, o doutor pediu que
                    ela explicasse melhor sobre como foi tudo nessa época.</p>
                <br>
                <p class="paragrafo">A garota disse que sua mãe só veio pegar nela e lhe dar carinho quando estava com 3
                    anos de idade! Daí ele perguntou. “Mas por quê?”.
                </p>
                <br>
                <p class="paragrafo">Então nessa hora ela soltou que sua mãe tinha pegado pneumonia logo depois que ela
                    nasceu.
                </p>
                <br>
                <p class="paragrafo">Daí o doutor lhe fez um questionamento simples que mudou tudo.</p>
                <br>
                <p class="paragrafo">– Mas vem cá! Você disse que sua mãe pegou pneumonia logo depois que você nasceu
                    não foi? Pense comigo! Você sabe que essa doença é infectocontagiosa e que uma criança pequena
                    dificilmente sobrevive a ela, não sabe?</p>
                <br>
                <p class="paragrafo">– Sim doutor, eu sei!</p>
                <br>
                <p class="paragrafo">– Então você acha mesmo que sua mãe não ter lhe dado carinho até os 3 anos é mesmo
                    desamor? Se ela tivesse lhe dado de mamar você teria morrido! Será que não lhe dando de mamar, na
                    realidade não era mesmo uma prova de amor? Pense no tanto que ela sofreu por querer lhe dar de
                    mamar, querer lhe dar carinho, lhe aquecer, e não pôde por causa da pneumonia?</p>
                <br>
                <p class="paragrafo">– Nossa doutor! O senhor acredita que eu nunca tinha pensado nisso?</p>
                <br>
                <p class="paragrafo">Os dois exemplos acima, foram retirados de sessões de terapia infantil. Mesmo sendo
                    simples, representam como uma mudança de perspectiva pode engatilhar uma mudança repentina no seu
                    modo de pensar e como seus pensamentos percorrem sua mente. Mude sua perspectiva, isso te ajudará.
                </p>



            </section>
            <div class="comentarios" id="comentarios">
                <div class="titulo">
                    <p>Comentários da postagem</p>
                </div>

            </div>

            <section id="comentar" class="comentar">
                <textarea placeholder="Faça seu comentário..." id="textoarea" rows="4" cols="50">
                    </textarea>
                <button id="btnComentar" onclick="fnComentar()">Comentar</button>
            </section>
        </div>
    </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="rights">
                <p>Vaguinha - Todos os direitos reservados.</p>
            </div>
        </div>
    </div>
</body>

</html>
<script>

    // Atualizando a imagem de fundo da postagem
    img_post.style.backgroundImage = "url('../img/posts/Mental/3.jpg')";
    img_post.style.backgroundPosition = "center";

    textoarea.innerHTML = "";
    // Criação de uma variavel de armazenamento local, essencial para o sistema de sessão
    var Armazenamento_local = localStorage;
    // Obtendo o valor da chave "logado" no armazenamento local. Que é atribuído como verdadeiro caso o usuário tenha feito login
    var logado = Armazenamento_local.getItem('logado');

    if (logado == "true") {
        //Habilita a função de deslogar, caso o usuário esteja logado.
        li_sair.style.display = "block";
        var id_usuario = Number(Armazenamento_local.getItem('id'));
        const data = { id_usuario: id_usuario };
        fetch("/usuarios/listar1usuario", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        }).
            then(function (resposta) {
                // Com a reposta, redirecionar o botão 'login' para a tela de perfil e mudando o nome para o noem do usuário logado
                resposta.json().then(function (dados) {
                    Armazenamento_local.setItem('nome_usuario', dados[0].nomeUsuario + " " + dados[0].sobrenomeUsuario);
                    Armazenamento_local.setItem('email', dados[0].emailUsuario);
                    Armazenamento_local.setItem('telefone', dados[0].telefoneUsuario);
                    nav_login.href = "../perfil.html"
                    nav_login.innerHTML = dados[0].nomeUsuario;
                })
            })
            .catch(function (erro) {
                console.log(erro);
            })
    } else {
        li_sair.style.display = "none";
        nav_login.style.display = "block";
        nav_login.href = "../login.html"
        nav_login.innerHTML = "Login"
        textoarea.innerHTML = "Faça seu login para comentar.";
        textoarea.disabled = true;
        btnComentar.style.display = "none";

    }

    function fnDeslogar() {
        Armazenamento_local.setItem("logado", false);
        Armazenamento_local.setItem("id", null);
        window.location = "../index.html";
    }

    function fnComentar() {

        if (logado) {
            var section = document.createElement("section");
            var p = document.createElement("p");
            var text = textoarea.value;


            const dados = {
                id_postador: Number(Armazenamento_local.getItem("id")),
                corpo_comentario: text.trim(),
                id_post: 7
            }
            fetch("/postagens/postar_comentario", {
                method: "POST",
                headers: {
                    // Informando que o tipo de corpo que será enviado será JSON
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(dados)
            }).then(function (resposta) {
                window.location = "post7.html";

            })
                .catch(function (erro) {
                    console.log(erro);
                })
        } else {
            alert("Faça seu login para comentar.");
        }



    }
    fetch("/postagens/listar_comentarios", {
        method: "POST",
        headers: {
            // Informando que o tipo de corpo que será enviado será JSON
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            id_post: 7
        })
    })
        .then(
            function (resposta) {
                console.log(resposta);
                resposta.json()
                    .then(function (dados) {
                        console.log(dados);

                        for (let i = 0; i < dados.length; i++) {
                            comentarios.innerHTML += `
                        <p><span id="usuario">${dados[i].nomeUsuario}</span> comentou: ${dados[i].corpoComentario}</p>
                        
                        `;
                        }
                    })
            }
        )
        .catch(function (erro) {
            console.log(erro)
        })



</script>