<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gregos</title>
    <link rel="stylesheet" href="../styles/post.css">
</head>

<body>
    <div class="header">
        <div class="container">
            <h1>S.I.G</h1>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="../post.html">Artigos</a></li>
                <li><a id="nav_login" href="login.html"></a></li>
                <li id="li_sair"><a onclick="fnDeslogar()">Sair</a></li>
            </ul>
        </div>
    </div>

    <div class="conteudo">
        <div class="container">

            <section>
                <p class="titulo">Estátuas gregas no S.I.G</p>
                <div class="img">
                    <img src="../img/wallpaper_1.jpg" alt="">
                </div>
                <p class="paragrafo">Olá, pessoal! Tudo bem por aí?</p><br>
                <p class="paragrafo">Seja você um leitor recorrente de Desenvolvimento Pessoal ou não, já deve ter se
                    deparado com alguma imagem dessas estátuas de mármore, em sua grande maioria esculpidas durante a
                    Grécia Antiga.<br><br>
                    Independente de qual for sua atribuição à esse artefetato, tenho quase certeza que ele estará
                    atrelado à medicina, esportes, atividade física, saúde e etc.<br><br>
                    Saiba que, mesmo se esse for seu pensamento ou não, os gregos, ao fazerem essas estátuas, tentavam
                    representar os Deuses, heróis e mitos de sua cultura.<br><br>
                    Antes de definir a relação proposta nesse artigo, vamos conhecer um pouco mais sobre essas
                    eestátuas.</p><br><br>
                <p class="titulo">Contexto histórico</p><br><br>
                <p class="paragrafo">A partir do século V a.C. as primeiras manifestações do período clássico surgiram
                    por meio de esculturas gregas ainda mais realistas, se comparadas a figura humana.<br><br>

                    A evolução entre os artistas possibilitou que as faces fossem esculpidas de forma menos rígida, como
                    era no período Arcaico.<br><br>

                    Como a mais marcante das características está a tridimensionalidade. As esculturas encantavam os
                    olhos da população por sua ideia de movimento. <br><br>

                    Policleto, um dos maiores escultores gregos, desenvolveu durante esse período regras de proporção
                    que, mais tarde serviriam de base para muitas outras criações. <br><br>


                    Sendo assim, essas estátuas carregam consigo uma mensagem de poder, grandiosidade etc. Também foram
                    muito utlizadas
                    para o estudo da medicina e anatomia humana, por isso muitas delas contam com corpos considerados
                    "perfeitos".<br><br>
                </p>

            </section>
            <div class="comentarios" id="comentarios">

            </div>

            <section id="comentar" class="comentar">
                <textarea id="textoarea">
                    </textarea>
                <button onclick="fnComentar()">Comentar</button>
            </section>
        </div>
    </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="rights">
                <p>Vaguinha - Todos os direitos reservados.</p>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    // Criação de uma variavel de armazenamento local, essencial para o sistema de sessão
    var Armazenamento_local = localStorage;
    // Obtendo o valor da chave "logado" no armazenamento local. Que é atribuído como verdadeiro caso o usuário tenha feito login
    var logado = Armazenamento_local.getItem('logado');

    if (logado == "true") {
        //Habilita a função de deslogar, caso o usuário esteja logado.
        li_sair.style.display = "block";
        var id_usuario = Number(Armazenamento_local.getItem('id'));
        const data = { id_usuario: id_usuario };
        fetch("/usuarios/listar1usuario", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        }).
            then(function (resposta) {
                // Com a reposta, redirecionar o botão 'login' para a tela de perfil e mudando o nome para o noem do usuário logado
                resposta.json().then(function (dados) {
                    Armazenamento_local.setItem('nome_usuario', dados[0].nomeUsuario + " " +dados[0].sobrenomeUsuario);
                    Armazenamento_local.setItem('email', dados[0].emailUsuario);
                    Armazenamento_local.setItem('telefone', dados[0].telefoneUsuario);
                    nav_login.href = "../perfil.html"
                    nav_login.innerHTML = dados[0].nomeUsuario;
                })
            })
            .catch()
    } else {

    }

    function fnDeslogar() {
        Armazenamento_local.setItem("logado", false);
        Armazenamento_local.setItem("id", null);
        window.location = "../index.html";
    }

    function fnComentar() {
        var section = document.createElement("section");
        var p = document.createElement("p");
        var text = textoarea.value;


        const dados = {
            id_postador: Number(Armazenamento_local.getItem("id")),
            corpo_comentario: text.trim(),
            id_post: 1
        }
        fetch("/usuarios/postar_comentario", {
            method: "POST",
            headers: {
                // Informando que o tipo de corpo que será enviado será JSON
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(dados)
        }).then(function (resposta) {
            resposta.json().then(function (resultado) {
              console.log(resultado);
               
            })
                .catch()
        })
            .catch()

        



    }
        fetch("/usuarios/listar_comentarios", {
            method: "POST",
            headers: {
                // Informando que o tipo de corpo que será enviado será JSON
                'Content-Type': 'application/json'
            },
            body:JSON.stringify({
                id_post: 1
            })
        })
        .then(
            function(resposta){
                console.log(resposta);
                resposta.json()
                .then(function(dados){
                    console.log(dados);
                    for (let i = 0; i < dados.length; i++) {
                        comentarios.innerHTML += `
                        <p>${dados[i].nomeUsuario} comentou: ${dados[i].corpoComentario}</p>
                        
                        `;
                    }
                })
            }
        )
        .catch(function(erro){
            console.log(erro)
        })
    


</script>